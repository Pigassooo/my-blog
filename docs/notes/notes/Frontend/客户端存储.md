# 客户端存储

## 介绍

客户端存储（Client-side storage）是指在浏览器端存储数据。

1. Cookie：Cookie 是服务器发送到用户浏览器并保存在本地的小型文本文件，它用于存储用户的会话信息。

2. LocalStorage：LocalStorage 是 HTML5 规范中提供的一种存储机制，它是基于用户的浏览器，可以将数据保存在用户的本地计算机上，除非手动删除，否则数据将在浏览器关闭后自动删除。

3. SessionStorage：SessionStorage 和 LocalStorage 类似，也是 HTML5 规范中提供的一种存储机制，它也是基于用户的浏览器，但它仅在当前会话（session）中有效，关闭浏览器窗口后数据也会被清除。


### Cookie

Cookie 是服务器发送到用户浏览器并保存在本地的小型文本文件，它用于存储用户的会话信息。

Cookie 具有以下几个特点：

1. 大小限制：Cookie 不能超过 4KB，所以不能存储过于复杂的数据。

2. 安全性：在HTTP中明文传输，不够安全，容易被篡改

3. 过期时间：Cookie 可以设置过期时间，过期后浏览器会自动删除，灵活调节存储时间。

4. 跨域问题：Cookie 无法跨域共享，只能在同一个域下共享。

5. 每次请求都会发送Cookie：Cookie 会在每次请求时自动发送给服务器，浪费带宽。

Cookie 主要用于以下几个方面：

1. 会话状态保持：Cookie 可以实现用户与服务器之间持续的会话状态保持，如用户登录状态、购物车记录等。

2. 个性化设置：Cookie 可以用于存储用户偏好的设置，如背景色、字体大小、语言偏好等。

3. 浏览器行为跟踪：Cookie 可以用于跟踪用户的浏览习惯，如记录用户的访问记录、点击记录等。

4. 分析统计：Cookie 可以用于分析网站流量、用户行为等，并用于改善网站的性能、提升用户体验。



### LocalStorage

LocalStorage 是 HTML5 规范中提供的一种存储机制，它是基于用户的浏览器，可以将数据保存在用户的本地计算机上，除非手动删除，否则数据将在浏览器关闭后自动删除。

LocalStorage 具有以下几个特点：

1. 存储大小：LocalStorage 最大可以存储 5MB 的数据。

2. 安全性：LocalStorage 存储在用户本地，不受服务器控制，安全性较高。

3. 存储位置：LocalStorage 存储在用户浏览器上，可以永久存储，除非手动删除。

4. 跨域问题：LocalStorage 无法跨域共享，只能在同一个域名下共享。

5. 存储类型：LocalStorage 只能存储字符串类型的数据。

6. 性能：LocalStorage 性能优于 Cookie，可以实现更快的响应速度。

7. 操作接口：LocalStorage 提供了操作接口，可以方便地进行数据存储、读取、删除等操作。

8. 不支持不同浏览器之间共享数据

LocalStorage 主要用于以下几个方面：

1. 本地数据分析：LocalStorage 可以用于本地数据分析，如记录用户操作行为、浏览习惯等，用于改善产品和服务。

2. 应用数据缓存：LocalStorage 可以用于缓存应用数据，如用户设置、页面布局、表单数据等，提升应用性能。

3. 离线应用：LocalStorage 可以用于实现离线应用，即在用户没有网络连接时，应用仍然可以正常运行。

4. 本地数据共享：LocalStorage 可以实现不同页面之间的数据共享，如同一浏览器的不同标签页间的数据共享。


### SessionStorage

SessionStorage 和 LocalStorage 类似，也是 HTML5 规范中提供的一种存储机制，它也是基于用户的浏览器，但它仅在当前会话（session）中有效，关闭浏览器窗口后数据也会被清除。

SessionStorage 具有以下几个特点：

1. 存储大小：SessionStorage 最大可以存储 5MB 的数据。

2. 安全性：SessionStorage 存储在用户本地，不受服务器控制，安全性较高。

3. 存储位置：SessionStorage 存储在用户浏览器上，仅在当前会话（session）中有效，关闭浏览器窗口后数据也会被清除。

4. 跨域问题：SessionStorage 无法跨域共享，只能在同一个域名下共享。

5. 存储类型：SessionStorage 只能存储字符串类型的数据。

6. 性能：SessionStorage 性能优于 Cookie，可以实现更快的响应速度。

7. 操作接口：SessionStorage 提供了操作接口，可以方便地进行数据存储、读取、删除等操作。

8. 不支持不同浏览器之间共享数据

9. 每个标签页都有自己的 SessionStorage：每个标签页都有自己的 SessionStorage，不同标签页间的数据互不影响。

10. 不适合长期存储

11. 使用场景有限

SessionStorage 主要用于：
    - 假设有一个多步骤表单流程
    - 用户在填写过程中可以点击  上一步/下一步 按钮，修改数据
    - 页面刷新后，用户可以继续填写之前的表单
    - 使用 SessionStorage 暂存内容

## 总结

- 共同点
    1. 都存储在浏览器端
    2. 不支持跨域

- 不同点：


|  | Cookie | LocalStorage | SessionStorage |
| --- | --- | --- | --- |
| 大小限制 | 4KB | 5MB | 5MB |
| 存储内容是否发送给服务器端 | 每次请求都发回 | 只保存在本地，不与服务器端发生任何交互 | 只保存在本地，不与服务器端发生任何交互 |
| 有效期 | 自行设置失效时间 | 永久有效 | 关闭浏览器前有效 |
| 作用域不同 | 同源同窗口中都是共享的 | 同源同窗口中都是共享的 | 不同窗口不共享 |

